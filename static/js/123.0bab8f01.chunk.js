"use strict";(self.webpackChunksophia_demo=self.webpackChunksophia_demo||[]).push([[123],{1123:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var s=n(6938),i=n(4855),o=n(5043),r=n(2572),l=n(2717),a=n(6026),c=n(6113),u=n(579);const d=()=>{const e=(0,c.q)("/models/CRIXI.fbx");return(0,u.jsx)("primitive",{object:e,scale:[.2,.2,.2],style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:"auto",touchAction:"none"}})},h=()=>(0,u.jsxs)(a.Hl,{camera:{position:[2.5,5,5],fov:75},style:{position:"relative",width:"100%",overflow:"hidden",pointerEvents:"auto",touchAction:"none"},children:[(0,u.jsx)("ambientLight",{intensity:.5}),(0,u.jsx)("directionalLight",{position:[1,5,5],intensity:2}),(0,u.jsx)(o.Suspense,{fallback:null,children:(0,u.jsx)(d,{})}),(0,u.jsx)(l.N,{})]}),p=()=>{const[e,t]=(0,o.useState)(!0),[n,l]=(0,o.useState)(!1),[a,c]=(0,o.useState)(0),[d,p]=(0,o.useState)({x:"0",y:"0"}),[x,g]=(0,o.useState)(!1),[f,m]=(0,o.useState)(""),[y,j]=(0,o.useState)([]),[v,w]=(0,o.useState)(!1),[S,E]=(0,o.useState)((()=>{const e=localStorage.getItem("totalPoints");return e?parseInt(e,10):0})),[T,I]=(0,o.useState)((()=>{const e=localStorage.getItem("currEnergy");return e?parseInt(e,10):1e3})),b=(0,o.useRef)(0),[C,k]=(0,o.useState)(!1),P=(0,o.useRef)(C),A=(0,o.useRef)(null);(0,o.useRef)(null);let[B,R]=(0,o.useState)(1),[N,D]=(0,o.useState)(1);const M=()=>{const e=window.navigator.userAgent;return!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)};(0,o.useEffect)((()=>{localStorage.setItem("currEnergy",T)}),[T]),(0,o.useEffect)((()=>{localStorage.setItem("totalPoints",S)}),[S]),(0,o.useEffect)((()=>{if(!M()){const e=document.getElementById("clickableElement");e&&(e.style.pointerEvents="none")}}),[]);(0,o.useEffect)((()=>{(T>=1e3||T<=0)&&I(1e3)}),[T]);const L=()=>(k(!0),z(),N),z=()=>{A.current&&clearTimeout(A.current),A.current=setTimeout((()=>{k(!1),b.current=0}),500)};(0,o.useEffect)((()=>(P.current=C,()=>{A.current&&clearTimeout(A.current)})),[C]);const F=e=>{if(!e)return;e.stopPropagation&&e.stopPropagation();const t=e.touches?e.touches[0]:e,n=e.currentTarget||t.target;if(!n)return;const s=n.getBoundingClientRect(),i=t.clientX-s.left,o=t.clientY-s.top;console.log("Touch event:",t),console.log("Clicker element:",n),console.log("Bounding rect:",s),console.log("Calculated coordinates:",{x:i,y:o}),j((e=>[...e,{x:i,y:o}])),w(!0)};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"20px",position:"absolute",top:"20px",width:"100%"},children:[(0,u.jsxs)("div",{style:{display:"flex",marginLeft:"20px",flexDirection:"column",width:"100%"},children:[(0,u.jsxs)("div",{style:{display:"flex",alignItems:"center",flexDirection:"row",width:"100%"},children:[(0,u.jsx)("img",{src:r,alt:"",style:{paddingRight:"10px"}}),(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"row",width:"100%"},children:[(0,u.jsx)("p",{className:"energyCount",id:"energyCount",children:T}),(0,u.jsx)("span",{children:"/"}),(0,u.jsx)("p",{className:"maximumEnergy",id:"maximumEnergy",children:"1000"})]})]}),(0,u.jsx)("div",{className:"energyBar",style:{marginTop:"10px",width:"100%"},children:(0,u.jsx)("progress",{className:"filledBar",id:"filledBar",max:"1000",value:T})})]}),null!==S&&(0,u.jsx)("div",{style:{display:"flex",marginRight:"20px",justifyContent:"center",alignItems:"start",width:"100%",paddingTop:"4px"},children:(0,u.jsxs)("span",{children:["Total Points: ",S]})})]}),(0,u.jsxs)("div",{onClick:M()?e=>{if(!e.isTrusted)return;t(!1),l(!0),F(e),I((e=>Math.min(e-B,1e3)));const n=L();c((e=>e+n)),b.current+=n}:null,onTouchStart:e=>{e.touches&&e.touches.length>1?e.preventDefault():e.isTrusted&&(t(!1),l(!0),F(e))},onTouchEnd:e=>(e=>{e&&e.changedTouches&&e.changedTouches.length>0?Array.from(e.changedTouches).forEach((t=>{F({touches:[t],target:e.target,currentTarget:e.currentTarget})})):F(e);const t=L();c((e=>e+t)),E((e=>e+t)),b.current+=t,I((e=>Math.min(e-B,1e3)))})(e.touches[0]),style:{display:"flex",width:"100%",height:"calc(100vh - 132px)",flexGrow:"1"},children:[y.map(((e,t)=>(0,u.jsx)(s.N,{children:v&&(0,u.jsxs)(i.P.div,{className:"clickerAnimation",initial:{opacity:1,y:0},animate:{opacity:[1,0],y:[-30,-120]},exit:{opacity:0},transition:{duration:2},style:{fontSize:"35px",left:"".concat(e.x,"px"),top:"".concat(e.y,"px"),position:"absolute",color:"#fff",zIndex:150,textShadow:"0px 4px 6px rgba(0, 0, 0, 0.5)"},onAnimationComplete:()=>{j([])},children:["+",N]})},t))),(0,u.jsx)(h,{style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:"auto",touchAction:"none"}})]}),(0,u.jsx)("div",{style:{display:"flex",bottom:"20px",position:"absolute",width:"100%",justifyContent:"center",alignItems:"center"},children:(0,u.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,u.jsxs)("span",{children:["For Session: ",a]})})})]})}}}]);
//# sourceMappingURL=123.0bab8f01.chunk.js.map